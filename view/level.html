<!--<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Candy Exam Levels</title>
<link rel="stylesheet" href="public/candy.css">
</head>
<body class="candy-bg">
<div id="candies"></div>

<div class="map-container">
  <h1 class="map-title">Candy Exam Map</h1>
  
  <svg class="map-path" viewBox="0 0 400 800" xmlns="http://www.w3.org/2000/svg"></svg>
  <div class="map-levels"></div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const totalLevels = 10;
  const unlocked = parseInt(localStorage.getItem("unlockedLevel")) || 1;
  const mapLevels = document.querySelector(".map-levels");
  const mapPath = document.querySelector(".map-path");
  const positions = [];

  for (let i = 0; i < totalLevels; i++) {
    const node = document.createElement("div");
    node.classList.add("level-node");
    node.dataset.level = i + 1;

    const top = 50 + i*80 + Math.floor(Math.random()*30);
    const left = 50 + (i%2===0 ? Math.random()*100 : 150 + Math.random()*100);
    node.style.top = top + "px";
    node.style.left = left + "px";

    if (i+1 <= unlocked) {
      node.textContent = i+1;
      node.addEventListener("click", () => {
        localStorage.setItem("currentLevel", i+1);
        window.location.href = "/exam-admin";
      });
    } else {
      node.classList.add("locked");
      node.textContent = "üîí";
    }

    mapLevels.appendChild(node);
    positions.push({top: top+30, left: left+30});
  }

  // Draw connecting paths
  for (let i = 0; i < positions.length-1; i++) {
    const p1 = positions[i];
    const p2 = positions[i+1];

    const path = document.createElementNS("http://www.w3.org/2000/svg","path");
    path.setAttribute("d", `M${p1.left} ${p1.top} C ${(p1.left+p2.left)/2} ${p1.top}, ${(p1.left+p2.left)/2} ${p2.top}, ${p2.left} ${p2.top}`);
    
    if(i+1 < unlocked){
      path.classList.add("path-glow");
      path.style.animationDelay = `${i*0.3}s`;
    } else {
      path.setAttribute("stroke", "#555");
      path.setAttribute("stroke-width", "4");
      path.setAttribute("fill", "none");
    }

    mapPath.appendChild(path);
  }
});
</script>
<script src="shared/candy.js"></script>
</body>
</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Candy Exam Levels</title>
<style>
body.candy-bg {
    margin: 0;
    height: 100vh;
    background: url('../assets/bg.jpg') no-repeat center center/cover;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Comic Sans MS', cursive, sans-serif;
    overflow: hidden;
  }
  
  /* Glassmorphic boxes */
  .login-box, .exam-box, .result-box {
    background: rgba(255, 255, 255, 0.1); /* frosted glass */
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.25);
    padding: 50px;
    border-radius: 20px;
    text-align: center;
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    animation: pop 0.5s ease-in-out;
    position: relative;
    z-index: 10;
    color: #fff;
  }
  .login-box input,
.exam-box input {
  width: 80%;              /* Make input wider */
  height: 45px;            /* Increase height */
  padding: 0 15px;         /* Add horizontal padding */
  font-size: 18px;         /* Make text inside larger */
  border-radius: 12px;     /* Rounded corners */
  border: 1px solid #ccc;  /* Optional border */
  outline: none;           /* Remove default outline */
  margin-bottom: 20px;     /* Space below input */
}

  
  /* Heading styles */
  h1, h2 {
    color: #000000;
    text-shadow: 2px 2px 10px rgba(0,0,0,0.2);
  }
  
  /* Buttons */
  button {
    background: linear-gradient(135deg, #00c6ff, #0072ff);
    border: none;
    padding: 12px 25px;
    margin-top: 15px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 18px;
    color: #fff;
    font-weight: bold;
    transition: transform 0.3s, box-shadow 0.3s;
    box-shadow: 0 8px 15px rgba(0,0,0,0.2);
  }
  
  button:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 12px 20px rgba(0,0,0,0.3);
  }
  
  /* Box animation */
  @keyframes pop {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }
  
  /* Falling candy container *
  #candies {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
    z-index: 0;
  }*/
  
  /*.candy {
    position: absolute;
    width: 40px;
    height: 40px;
    animation: fall linear infinite;
    opacity: 0.9;
  }*/
  
  @keyframes fall {
    0% { transform: translateY(-50px) rotate(0deg); opacity: 1; }
    100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
  }
  
  /* Map and levels */
  .map-container {
    position: relative;
    width: 400px;
    margin: 0 auto;
    height: 800px;
  }
  
  .map-title {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    text-align: left;          /* Align text to the very left */
    margin: 0;                 /* Remove default margin */
    padding-left: 15px;        /* Optional: add some padding from container edge */
    margin-bottom: 400px;       /* Space below the title */
    color: #e0e0e0;
    font-size: 32px;           /* Large font size */
    font-weight: bold;
    text-shadow: 2px 2px rgba(105, 75, 75, 0.3);
}

  
  .map-path {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
  
  .level-node {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, #00c6ff, #0072ff);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 28px;
    font-weight: bold;
    color: white;
    cursor: pointer;
    box-shadow: 0 0 20px rgba(0,198,255,0.7);
    transition: transform 0.3s, box-shadow 0.3s;
    position: absolute;
  }
  
  .level-node:hover {
    transform: scale(1.15);
    box-shadow: 0 0 30px rgba(0,198,255,0.9);
  }
  
  .level-node.locked {
    background: #555;
    cursor: not-allowed;
    color: #ccc;
    font-size: 32px;
  }
  
  /* Optional: subtle floating effect for glass boxes */
  .login-box, .exam-box, .result-box {
    animation: floatGlass 6s ease-in-out infinite, pop 0.5s ease-in-out;
  }
  
  @keyframes floatGlass {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }

  /* Exam styles */
  .exam-container {
    display: none;
    background-image: url('../assets/bg2.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    min-height: 100vh;
    padding: 16px;
  }

  .overlay {
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    padding: 24px;
    margin-bottom: 24px;
  }

  .exam-header {
    max-width: 1024px;
    margin: 0 auto;
  }

  .timer-container {
    max-width: 1024px;
    margin: 0 auto;
    text-align: center;
  }

  .questions-container {
    max-width: 1024px;
    margin: 0 auto;
  }

  .question-card {
    margin-bottom: 24px;
  }

  .submit-container {
    max-width: 1024px;
    margin: 2rem auto;
    text-align: center;
  }

  .results-container {
    max-width: 1024px;
    margin: 2rem auto;
    display: none;
  }

  .option-label {
    display: flex;
    align-items: center;
    padding: 12px;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .option-label:hover {
    background-color: #f3f4f6;
  }

  .option-input {
    margin-right: 12px;
  }

  .btn-primary {
    background-color: #2563eb;
    color: white;
    padding: 12px 32px;
    border-radius: 8px;
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .btn-primary:hover {
    background-color: #1d4ed8;
  }

  .btn-success {
    background-color: #059669;
    color: white;
    padding: 8px 24px;
    border-radius: 4px;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s;
    margin-top: 16px;
  }

  .btn-success:hover {
    background-color: #047857;
  }

  .result-correct {
    border: 1px solid #10b981;
    background-color: #ecfdf5;
    padding: 16px;
    border-radius: 4px;
    margin-bottom: 16px;
  }

  .result-incorrect {
    border: 1px solid #ef4444;
    background-color: #fef2f2;
    padding: 16px;
    border-radius: 4px;
    margin-bottom: 16px;
  }

  .text-green {
    color: #059669;
  }

  .text-red {
    color: #dc2626;
  }

  .badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 9999px;
    font-size: 14px;
    font-weight: 500;
  }

  .badge-blue {
    background-color: #dbeafe;
    color: #1e40af;
  }

  .badge-green {
    background-color: #dcfce7;
    color: #166534;
  }

  .badge-purple {
    background-color: #e9d5ff;
    color: #7c3aed;
  }

  .hidden {
    display: none !important;
  }
</style>
</head>
<body class="candy-bg">

<!-- Level Map Container -->
<div id="level-map" class="map-container">
  <div id="candies"></div>
  <h1 class="map-title"> Exam Map</h1>
  
  <svg class="map-path" viewBox="0 0 400 800" xmlns="http://www.w3.org/2000/svg"></svg>
  <div class="map-levels"></div>
</div>

<!-- Exam Container -->
<div id="exam-container" class="exam-container">
    <div class="exam-header">
        <div class="overlay">
            <h1 style="font-size: 1.875rem; font-weight: bold; color: #1f2937; margin-bottom: 0.5rem;">Class 7 Science</h1>
            <p style="color: #6b7280; margin-bottom: 1rem;">Only for class six</p>
            <div style="display: flex; flex-wrap: wrap; gap: 1rem; font-size: 0.875rem;">
                <span class="badge badge-blue">Duration: 5 minutes</span>
                <span class="badge badge-green">Status: Active</span>
                <span class="badge badge-purple">Questions: 4</span>
            </div>
        </div>
    </div>

    <div class="timer-container">
        <div class="overlay">
            <h2 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem;">Time Remaining</h2>
            <div id="timer" style="font-size: 1.5rem; font-weight: bold; color: #dc2626;">05:00</div>
        </div>
    </div>

    <div class="questions-container">
        <div id="questionsContainer">
            <!-- Questions will be dynamically inserted here -->
        </div>
    </div>

    <div class="submit-container">
        <button onclick="submitExam()" class="btn-primary">
            Submit Exam
        </button>
    </div>

    <div id="resultsSection" class="results-container">
        <div class="overlay">
            <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">Exam Results</h2>
            <div id="resultsContent"></div>
            <button onclick="retakeExam()" class="btn-success">
                Retake Exam
            </button>
        </div>
    </div>
</div>

<script>
// üç≠ Question sets for each level
let levels = {
    1: [
      { question: "üç¨ What is 2 + 2?", options: ["3", "4", "5"], answer: "4" },
      { question: "üç≠ Capital of France?", options: ["Paris", "Rome", "London"], answer: "Paris" }
    ],
    2: [
  { question: "üåø Which part of the plant carries out photosynthesis?", options: ["Root", "Stem", "Leaf", "Flower"], answer: "Leaf" },
  { question: "üíß What is the boiling point of water at sea level?", options: ["0¬∞C", "50¬∞C", "100¬∞C", "212¬∞C"], answer: "100¬∞C" },
  { question: "üòÆ Which gas do humans exhale during respiration?", options: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Hydrogen"], answer: "Carbon Dioxide" },
  { question: "‚òÄÔ∏è Which of the following is a renewable source of energy?", options: ["Coal", "Petroleum", "Solar Energy", "Natural Gas"], answer: "Solar Energy" }
],

    3: [
      { question: "üç´ Who invented the light bulb?", options: ["Edison", "Newton", "Tesla"], answer: "Edison" },
      { question: "üçØ Which is the fastest land animal?", options: ["Cheetah", "Lion", "Horse"], answer: "Cheetah" }
    ]
};

// Exam Data
const examData = {
    id: 'default-class7-science',
    title: 'Class 7 Science',
    duration: 5,
    status: 'active',
    description: 'Only for class six',
    teacherId: 'default-teacher',
    createdAt: new Date().toISOString(),
    createdBy: 'System',
    questionCount: 4,
    questions: [
        {
            id: 1,
            text: 'Which part of the plant carries out photosynthesis?',
            type: 'multiple-choice',
            options: ['Root', 'Stem', 'Leaf', 'Flower'],
            correctAnswer: 2
        },
        {
            id: 2,
            text: 'What is the boiling point of water at sea level?',
            type: 'multiple-choice',
            options: ['0¬∞C', '50¬∞C', '100¬∞C', '212¬∞C'],
            correctAnswer: 2
        },
        {
            id: 3,
            text: 'Which gas do humans exhale during respiration?',
            type: 'multiple-choice',
            options: ['Oxygen', 'Carbon Dioxide', 'Nitrogen', 'Hydrogen'],
            correctAnswer: 1
        },
        {
            id: 4,
            text: 'Which of the following is a renewable source of energy?',
            type: 'multiple-choice',
            options: ['Coal', 'Petroleum', 'Solar Energy', 'Natural Gas'],
            correctAnswer: 2
        }
    ]
};

// Global variables
let currentQuestion = 0;
let score = 0;
let selectedLevel = 1;
let currentLevelData = {};
let userAnswers = {};
let timeRemaining = examData.duration * 60;
let timerInterval;

document.addEventListener("DOMContentLoaded", () => {
  const totalLevels = 10;
  const unlocked = parseInt(window.localStorage?.getItem("unlockedLevel")) || 1;
  const mapLevels = document.querySelector(".map-levels");
  const mapPath = document.querySelector(".map-path");
  const positions = [];

  // Create level nodes
  for (let i = 0; i < totalLevels; i++) {
    const node = document.createElement("div");
    node.classList.add("level-node");
    node.dataset.level = i + 1;

    const top = 50 + i*80 + Math.floor(Math.random()*30);
    const left = 50 + (i%2===0 ? Math.random()*100 : 150 + Math.random()*100);
    node.style.top = top + "px";
    node.style.left = left + "px";

    if (i+1 <= unlocked) {
      node.textContent = i+1;
      node.addEventListener("click", () => {
        selectedLevel = i+1;
        startExam();
      });
    } else {
      node.classList.add("locked");
      node.textContent = "üîí";
    }

    mapLevels.appendChild(node);
    positions.push({top: top+30, left: left+30});
  }

  // Draw connecting paths
  for (let i = 0; i < positions.length-1; i++) {
    const p1 = positions[i];
    const p2 = positions[i+1];

    const path = document.createElementNS("http://www.w3.org/2000/svg","path");
    path.setAttribute("d", `M${p1.left} ${p1.top} C ${(p1.left+p2.left)/2} ${p1.top}, ${(p1.left+p2.left)/2} ${p2.top}, ${p2.left} ${p2.top}`);
    
    if(i+1 < unlocked){
      path.style.stroke = "#00c6ff";
      path.style.strokeWidth = "6";
      path.style.fill = "none";
      path.style.filter = "drop-shadow(0 0 10px #00c6ff)";
    } else {
      path.setAttribute("stroke", "#555");
      path.setAttribute("stroke-width", "4");
      path.setAttribute("fill", "none");
    }

    mapPath.appendChild(path);
  }

  // Falling candy animation
  let candyContainer = document.getElementById("candies");
  if (candyContainer) {
    setInterval(() => {
      let candy = document.createElement("div");
      candy.style.cssText = `
        position: absolute;
        width: 40px;
        height: 40px;
        background: radial-gradient(circle, #ff6b9d, #c44569);
        border-radius: 50%;
        animation: fall linear infinite;
        opacity: 0.9;
        left: ${Math.random() * window.innerWidth}px;
        animation-duration: ${3 + Math.random() * 4}s;
      `;
      /*candy.textContent = ['üç¨', 'üç≠', 'üç©', 'üç™'][Math.floor(Math.random() * 4)];*/
      candy.style.fontSize = '20px';
      candy.style.display = 'flex';
      candy.style.alignItems = 'center';
      candy.style.justifyContent = 'center';
      candyContainer.appendChild(candy);

      setTimeout(() => candy.remove(), 7000);
    }, 800);
  }
});

function startExam() {
  document.getElementById("level-map").style.display = "none";
  document.getElementById("exam-container").style.display = "block";
  
  // Reset exam state
  currentQuestion = 0;
  score = 0;
  userAnswers = {};
  timeRemaining = examData.duration * 60;
  
  // Use candy levels if available, otherwise use admin exam
  if (levels[selectedLevel]) {
    currentLevelData = levels[selectedLevel];
    loadCandyQuestion();
  } else {
    currentLevelData = examData.questions;
    renderQuestions();
    startTimer();
  }
}

function loadCandyQuestion() {
  if (currentQuestion < currentLevelData.length) {
    let q = currentLevelData[currentQuestion];
    let container = document.getElementById("questionsContainer");
    container.innerHTML = `
      <div class="overlay question-card">
        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem;">Question ${currentQuestion + 1}</h3>
        <p style="color: #374151; margin-bottom: 1rem;">${q.question}</p>
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
          ${q.options.map(opt => `
            <label class="option-label">
              <input type="radio" name="candyQuestion" value="${opt}" class="option-input">
              <span>${opt}</span>
            </label>
          `).join('')}
        </div>
        <button onclick="checkCandyAnswer()" style="margin-top: 1rem;" class="btn-primary">Next Question</button>
      </div>
    `;
  } else {
    showCandyResults();
  }
}

function checkCandyAnswer() {
  const selected = document.querySelector('input[name="candyQuestion"]:checked');
  if (!selected) {
    alert("Please select an answer!");
    return;
  }
  
  if (selected.value === currentLevelData[currentQuestion].answer) {
    score++;
  }
  currentQuestion++;
  loadCandyQuestion();
}

function showCandyResults() {
  const percentage = (score / currentLevelData.length) * 100;
  const passed = percentage >= 50;
  
  document.getElementById("questionsContainer").innerHTML = `
    <div class="overlay">
      <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">Exam Results</h2>
      <div style="margin-bottom: 1.5rem;">
        <p style="font-size: 1.25rem; margin-bottom: 0.5rem;">Score: <span style="font-weight: bold;">${score}/${currentLevelData.length}</span></p>
        <p style="font-size: 1.125rem;">Percentage: <span style="font-weight: bold; color: ${passed ? '#059669' : '#dc2626'};">${percentage.toFixed(1)}%</span></p>
        <p style="margin-top: 1rem; font-weight: 600; color: ${passed ? '#059669' : '#dc2626'};">
          ${passed ? 'üéâ Congratulations! You passed!' : '‚ùå You need 50% to unlock the next level.'}
        </p>
      </div>
      <div style="display: flex; gap: 1rem; justify-content: center;">
        <button onclick="goBackToMap()" class="btn-primary">Back to Map</button>
        <button onclick="retakeCandyExam()" class="btn-success">Retake Exam</button>
      </div>
    </div>
  `;

  if (passed) {
    unlockNextLevel();
  }
}

function unlockNextLevel() {
  const currentUnlocked = parseInt(window.localStorage?.getItem("unlockedLevel")) || 1;
  const newUnlocked = Math.max(currentUnlocked, selectedLevel + 1);
  
  if (window.localStorage) {
    window.localStorage.setItem("unlockedLevel", newUnlocked);
  }
}

function retakeCandyExam() {
  currentQuestion = 0;
  score = 0;
  loadCandyQuestion();
}

function goBackToMap() {
  document.getElementById("level-map").style.display = "flex";
  document.getElementById("exam-container").style.display = "none";
  
  // Refresh the map to show newly unlocked levels
  location.reload();
}

// Admin exam functions
function renderQuestions() {
  const container = document.getElementById('questionsContainer');
  container.innerHTML = '';

  examData.questions.forEach((question, index) => {
    const questionDiv = document.createElement('div');
    questionDiv.className = 'overlay question-card';
    
    questionDiv.innerHTML = `
      <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem;">Question ${index + 1}</h3>
      <p style="color: #374151; margin-bottom: 1rem;">${question.text}</p>
      <div style="display: flex; flex-direction: column; gap: 0.5rem;">
        ${question.options.map((option, optionIndex) => `
          <label class="option-label">
            <input type="radio" name="question${question.id}" value="${optionIndex}" 
              onchange="saveAnswer(${question.id}, ${optionIndex})" class="option-input">
            <span>${option}</span>
          </label>
        `).join('')}
      </div>
    `;
    
    container.appendChild(questionDiv);
  });
}

function saveAnswer(questionId, answerIndex) {
  userAnswers[questionId] = answerIndex;
}

function startTimer() {
  timerInterval = setInterval(() => {
    if (timeRemaining <= 0) {
      clearInterval(timerInterval);
      submitExam();
      return;
    }

    timeRemaining--;
    const minutes = Math.floor(timeRemaining / 60);
    const seconds = timeRemaining % 60;
    document.getElementById('timer').textContent = 
      `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
  }, 1000);
}

function submitExam() {
  clearInterval(timerInterval);
  
  let correctAnswers = 0;
  const results = examData.questions.map(question => {
    const userAnswer = userAnswers[question.id];
    const isCorrect = userAnswer === question.correctAnswer;
    if (isCorrect) correctAnswers++;
    
    return {
      questionId: question.id,
      questionText: question.text,
      userAnswer: userAnswer !== undefined ? question.options[userAnswer] : 'Not answered',
      correctAnswer: question.options[question.correctAnswer],
      isCorrect: isCorrect
    };
  });

  showResults(results, correctAnswers);
}

function showResults(results, correctAnswers) {
  document.getElementById('questionsContainer').classList.add('hidden');
  document.querySelector('button[onclick="submitExam()"]').classList.add('hidden');
  document.getElementById('resultsSection').style.display = 'block';

  const percentage = (correctAnswers / examData.questionCount * 100).toFixed(1);
  const passed = percentage >= 50;
  const resultsContent = document.getElementById('resultsContent');
  
  resultsContent.innerHTML = `
    <div style="margin-bottom: 1.5rem;">
      <p style="font-size: 1.25rem; margin-bottom: 0.5rem;">Score: <span style="font-weight: bold;">${correctAnswers}/${examData.questionCount}</span></p>
      <p style="font-size: 1.125rem;">Percentage: <span style="font-weight: bold;">${percentage}%</span></p>
      <p style="margin-top: 1rem; font-weight: 600; color: ${passed ? '#059669' : '#dc2626'};">
        ${passed ? 'üéâ Congratulations! You passed!' : '‚ùå You need 50% to unlock the next level.'}
      </p>
    </div>
    <div style="display: flex; flex-direction: column; gap: 1rem;">
      ${results.map((result, index) => `
        <div class="${result.isCorrect ? 'result-correct' : 'result-incorrect'}">
          <p style="font-weight: 600; margin-bottom: 0.5rem;">Question ${index + 1}: ${result.questionText}</p>
          <p>Your answer: <span class="${result.isCorrect ? 'text-green' : 'text-red'}">${result.userAnswer}</span></p>
          ${!result.isCorrect ? `<p>Correct answer: <span class="text-green">${result.correctAnswer}</span></p>` : ''}
        </div>
      `).join('')}
    </div>
    <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1rem;">
      <button onclick="goBackToMap()" class="btn-primary">Back to Map</button>
    </div>
  `;

  if (passed) {
    unlockNextLevel();
  }
}

function retakeExam() {
  userAnswers = {};
  timeRemaining = examData.duration * 60;
  document.getElementById('resultsSection').style.display = 'none';
  document.getElementById('questionsContainer').classList.remove('hidden');
  document.querySelector('button[onclick="submitExam()"]').classList.remove('hidden');
  renderQuestions();
  startTimer();
}
</script>
</body>
</html>
